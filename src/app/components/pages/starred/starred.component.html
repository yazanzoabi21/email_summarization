<div [@fadeSlideAnimation]="selectedEmail ? 'email' : 'inbox'">
    <div class="email-list" *ngIf="!selectedEmail; else emailDetail">
        <div class="email-item" *ngFor="let email of starredEmails" (click)="onEmailClick(email)">
            <div class="checkbox-star d-flex align-items-center">
                <input type="checkbox" class="form-check-input m-0"
                    (click)="toggleEmailSelection($event); $event.stopPropagation()" />
                <i class="fa-star small-icon"
                    [ngClass]="{ 'fa-solid text-warning': email.isStarred, 'fa-regular': !email.isStarred }"
                    (click)="toggleStar(email, $event); $event.stopPropagation()">
                </i>
            </div>

            <div class="email-sender">{{ email.sender }}</div>

            <div class="email-subject-preview">
                <span class="email-label">Inbox</span>
                <span class="email-subject">{{ email.subject }}</span>
                <span class="email-preview"> - {{ email.preview }}</span>
            </div>

            <div class="email-time">{{ email.time }}</div>

            <div class="email-actions">
                <button class="action-button" (click)="archiveEmail(email); $event.stopPropagation()" title="Archive">
                    <i class="fa-solid fa-box-archive"></i>
                </button>
                <button class="action-button" (click)="deleteEmail(email); $event.stopPropagation()" title="Delete">
                    <i class="fa-solid fa-trash"></i>
                </button>
                <button class="action-button" (click)="markEmailAsRead(email); $event.stopPropagation()"
                    title="Mark as Read">
                    <i class="fa-regular fa-envelope-open"></i>
                </button>
            </div>
        </div>
    </div>

    <ng-template #emailDetail>
        <div class="email-detail-container">
            <div class="email-detail-card">
                <button class="btn btn-light mb-3" (click)="closeEmail()">
                    <i class="fa fa-arrow-left"></i> Back
                </button>

                <h4 class="mb-2">{{ selectedEmail?.subject }}</h4>
                <p class="text-muted mb-2">From: {{ selectedEmail?.sender }}</p>
                <p>{{ selectedEmail?.preview }}</p>
                <p class="text-muted mt-4">{{ selectedEmail?.time }}</p>
            </div>
        </div>
    </ng-template>
</div>